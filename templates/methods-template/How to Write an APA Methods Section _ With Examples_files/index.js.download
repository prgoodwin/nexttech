(()=>{config={...{debug:!1}||{}};const e={dev:["local"],qa:["com","nl","uk","de","at","ch","fr"],prod:["com","nl","uk","de","at","ch","fr"]},t={dev:"b150255c1ee81e5a4273",qa:"b150255c1ee81e5a4273",prod:"68e099d685ed9fe7eae5"},n={dev:{local:"3a5328d168160e7bd7886e86333ef635",com:"3a5328d168160e7bd7886e86333ef635"},qa:{com:"3a5328d168160e7bd7886e86333ef635",nl:"3a5328d168160e7bd7886e86333ef635",de:"3a5328d168160e7bd7886e86333ef635",at:"3a5328d168160e7bd7886e86333ef635",ch:"3a5328d168160e7bd7886e86333ef635",es:"3a5328d168160e7bd7886e86333ef635"},prod:{com:"6ae9ad7168028f5affbce98a196acc26",uk:"da5b92d2e98d2f62231d895cd15ed778",nl:"68e13bf06a80a492852557a000e370c0",fr:"85afa937eee5181007b52fa60e77c783",de:"e1e8334a7eb88f1c26b80a1094e7401b",at:"e1e8334a7eb88f1c26b80a1094e7401b",ch:"e1e8334a7eb88f1c26b80a1094e7401b",es:"08349d1e5083f86d94146c841729b276"}},i=new class{constructor(){this._amplitudeEnabled=!1,this._customerIoEnabled=!1,this._debugEnabled=!1,this._user=this._getUser()}_init(){config.debug&&this.enableDebug();const i=window.location.host.split(".").pop();n[s()]&&n[s()][i]&&this._enableAmplitude(n[s()][i]),t[s()]&&e[s()].includes(i)&&this._enableCustomerIo(t[s()])}getCustomerIoInstance(){return window._cio||void 0}getAmplitudeInstance(){return window.amplitude?window.amplitude.getInstance():void 0}enableDebug(){this._debugEnabled=!0,this.debug("Marketing debug enabled")}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0]="[DEBUG] "+new Date+" "+t[0],this._debugEnabled&&console.log(...t)}_enableAmplitude(e){!function(e,t){var n=e.amplitude||{_q:[],_iq:{}},i=t.createElement("script");i.type="text/javascript",i.integrity="sha384-5fhzC8Xw3m+x5cBag4AMKRdf900vw3AoaLty2vYfcKIX1iEsYRHZF4RLXIsu2o+F",i.crossOrigin="anonymous",i.async=!0,i.src="https://cdn.amplitude.com/libs/amplitude-8.21.4-min.gz.js",i.onload=function(){e.amplitude.runQueuedFunctions||console.log("[Amplitude] Error: could not load SDK")};var s=t.getElementsByTagName("script")[0];function a(e,t){e.prototype[t]=function(){return this._q.push([t].concat(Array.prototype.slice.call(arguments,0))),this}}s.parentNode.insertBefore(i,s);for(var o=function(){return this._q=[],this},r=["add","append","clearAll","prepend","set","setOnce","unset","preInsert","postInsert","remove"],d=0;d<r.length;d++)a(o,r[d]);n.Identify=o;for(var u=function(){return this._q=[],this},l=["setProductId","setQuantity","setPrice","setRevenueType","setEventProperties"],c=0;c<l.length;c++)a(u,l[c]);n.Revenue=u;var p=["init","isNewSession","logEvent","logRevenue","setUserId","setUserProperties","setOptOut","setVersionName","setDomain","setDeviceId","enableTracking","setGlobalUserProperties","identify","clearUserProperties","setGroup","logRevenueV2","regenerateDeviceId","groupIdentify","onInit","logEventWithTimestamp","logEventWithGroups","setSessionId","resetSessionId","setLibrary","setTransport"];function g(e){function t(t){e[t]=function(){e._q.push([t].concat(Array.prototype.slice.call(arguments,0)))}}for(var n=0;n<p.length;n++)t(p[n])}g(n),n.getInstance=function(e){return e=(e&&0!==e.length?e:"$default_instance").toLowerCase(),Object.prototype.hasOwnProperty.call(n._iq,e)||(n._iq[e]={_q:[]},g(n._iq[e])),n._iq[e]},e.amplitude=n}(window,document),this.getAmplitudeInstance().init(e,this._user?String(this._user.id).padStart(5,"0"):void 0,{includeUtm:!0,includeGclid:!0,includeReferrer:!0}),window.dispatchEvent(new CustomEvent("amplitude-initialized",{detail:{instance:this.getAmplitudeInstance()}})),this._amplitudeEnabled=!0,this.debug("Amplitude enabled"+(this._user?` for user ${this._user.id}`:" without user"))}_enableCustomerIo(e){if(this._user)if(this._user.hasMarketingConsent){var t=t||[];!function(){var n,i,s;for(n=function(e){return function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}},i=["load","identify","sidentify","track","page","on","off"],s=0;s<i.length;s++)t[i[s]]=n(i[s]);var a=document.createElement("script"),o=document.getElementsByTagName("script")[0];a.async=!0,a.id="cio-tracker",a.setAttribute("data-site-id",e),a.setAttribute("data-use-array-params","true"),a.setAttribute("data-auto-track-page","false"),a.src="https://assets.customer.io/assets/track-eu.js",o.parentNode.insertBefore(a,o)}(),window._cio=t,t.identify({id:String(this._user.id)}),this._customerIoEnabled=!0,this.debug("CustomerIO initialized with user id",this._user.id)}else this.debug("CustomerIO not initialized because user did not give marketing consent");else this.debug("CustomerIO not initialized because no user is logged in")}trackEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._event("track",e,t)}pageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.url=t.url||window.location.href.split("?")[0],t.path=t.path||window.location.pathname,this._event("page",e,t)}_event(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=()=>(!1===this._amplitudeEnabled||("page"===e&&this.getAmplitudeInstance()?this.getAmplitudeInstance().onInit((i=>{n.landing_page=void 0===n.landing_page?i.isNewSession():n.landing_page,this.getAmplitudeInstance().logEvent(t,n),this.debug(`Amplitude ${e} event ${t}`,n)})):(this.getAmplitudeInstance().logEvent(t,n),this.debug(`Amplitude ${e} event ${t}`,n))),this),s=()=>(!1===this._customerIoEnabled||("page"===e&&this.getAmplitudeInstance()?this.getAmplitudeInstance().onInit((i=>{n.landing_page=void 0===n.landing_page?i.isNewSession():n.landing_page,this.getCustomerIoInstance().track(t,n),this.debug(`CustomerIO ${e} event ${t}`,n)})):(this.getCustomerIoInstance().track(t,n),this.debug(`CustomerIO ${e} event ${t}`,n))),this);return{send:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((e=>{"amplitude"===e&&i(),"customerio"===e&&s()}))},sendToAmplitude:i,sendToCustomerIo:s}}_getUser(){const e=e=>{let t=("; "+document.cookie).split("; "+e+"=");return 2===t.length?t.pop().split(";").shift():null};try{let t=e("token_sfqa");if(("scribbr"!==window.location.hostname.split(".")[1]||["app","www"].includes(window.location.hostname.split(".")[0]))&&(t=e("token_app")),!t)return null;let n=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),i=decodeURIComponent(atob(n).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(i)}catch(e){return null}}},s=()=>{const e=window.location.hostname.split(".")[0];return-1!==["www","app"].indexOf(e)?"prod":-1!==["qa","staging"].indexOf(e)?"qa":"dev"};i._init(),window.marketing=i})()